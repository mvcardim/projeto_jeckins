global:
  security:
    allowInsecureImages: true

replicaCount: 1

image:
  repository: gitea/gitea
  tag: "1.21.11"
  pullPolicy: IfNotPresent

service:
  http:
    type: LoadBalancer
    port: 3000
  ssh:
    type: LoadBalancer
    port: 22
    annotations: {}
    labels: {}

ingress:
  enabled: true
  className: nginx
  hosts:
    - host: gitea.localhost.com
      paths:
        - path: /
          pathType: Prefix
  tls: []

resources:
  requests:
    memory: 512Mi
    cpu: 250m
  limits:
    memory: 1Gi
    cpu: 500m

persistence:
  enabled: true
  size: 5Gi
  accessModes:
    - ReadWriteOnce
  storageClass: standard
  mountPath: /data

# ⚙️ Apenas um banco ativo
postgresql-ha:
  enabled: false

postgresql:
  enabled: true
  image:
    registry: docker.io
    repository: library/postgres
    tag: "16-alpine"
  auth:
    username: gitea
    password: gitea_password_123
    database: gitea
  primary:
    persistence:
      enabled: true
      size: 10Gi
      storageClass: standard
  service:
    ports:
      postgresql: 5432

# ⚙️ Desabilitar Redis Cluster e manter Redis simples
redis-cluster:
  enabled: false

redis:
  enabled: true
  architecture: standalone
  auth:
    enabled: false
  master:
    persistence:
      enabled: true
      size: 8Gi
      storageClass: standard

gitea:
  admin:
    username: gitea_admin
    password: "r8sA8CPHD9!bt6d"
    email: "admin@gitea.localhost.com"

  config:
    APP_NAME: "Gitea"
    RUN_MODE: "prod"

    server:
      PROTOCOL: http
      DOMAIN: gitea.localhost.com
      ROOT_URL: "http://gitea.localhost.com:3000/"
      SSH_DOMAIN: gitea.localhost.com
      SSH_PORT: 22
      DISABLE_SSH: false
      START_SSH_SERVER: true
      HTTP_PORT: 3000

    database:
      DB_TYPE: postgres
      HOST: gitea-postgresql:5432
      NAME: gitea
      USER: gitea
      PASSWD: gitea_password_123
      SSL_MODE: disable

    session:
      PROVIDER: db

    cache:
      ADAPTER: memory

    queue:
      TYPE: level
      PATH: data/queues

